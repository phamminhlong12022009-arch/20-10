import React, { useState, useRef, useEffect, useCallback } from "react";

export default function App() {
  const [locked, setLocked] = useState(true);
  const [passwordInput, setPasswordInput] = useState("");
  const password = "20/10LOVE";
  const message = `ðŸ’Œ ChÃºc em 20/10 tháº­t xinh Ä‘áº¹p, háº¡nh phÃºc vÃ  luÃ´n Ä‘Æ°á»£c yÃªu thÆ°Æ¡ng â¤ï¸\n\nTá»« ngÆ°á»i thÆ°Æ¡ng cá»§a em ðŸŒ¸`;
  const scrollRef = useRef(null);
  const scrollInterval = useRef(null);

  const handleUnlock = useCallback(() => {
    if (passwordInput === password) {
      setLocked(false);
    } else {
      alert("Sai máº­t kháº©u rá»“i ðŸ’”");
    }
  }, [passwordInput]);

  useEffect(() => {
    if (!locked && scrollRef.current) {
      const el = scrollRef.current;

      scrollInterval.current = setInterval(() => {
        el.scrollBy({ top: 1, behavior: "smooth" });
        if (el.scrollTop + el.clientHeight >= el.scrollHeight - 2) {
          el.scrollTo({ top: 0, behavior: "smooth" });
        }
      }, 50);

      return () => clearInterval(scrollInterval.current);
    }
  }, [locked]);

  return (
    <div style={{ fontFamily: "sans-serif", textAlign: "center", padding: 20 }}>
      <h1 style={{ color: "#e91e63" }}>ðŸ’– Trang TÃ¬nh YÃªu 20/10 ðŸ’–</h1>
      {locked ? (
        <div>
          <p>Nháº­p máº­t kháº©u Ä‘á»ƒ xem tin nháº¯n (gá»£i Ã½: 20/10LOVE)</p>
          <input
            type="password"
            value={passwordInput}
            onChange={(e) => setPasswordInput(e.target.value)}
            style={{ padding: 8, borderRadius: 8 }}
            aria-label="Password input"
            autoFocus
          />
          <button
            onClick={handleUnlock}
            style={{
              marginLeft: 10,
              padding: "8px 16px",
              background: "#e91e63",
              color: "white",
              border: "none",
              borderRadius: 8,
              cursor: "pointer",
            }}
            aria-label="Unlock message"
          >
            Má»Ÿ khÃ³a
          </button>
        </div>
      ) : (
        <div
          ref={scrollRef}
          style={{
            marginTop: 20,
            border: "2px solid #f48fb1",
            borderRadius: 10,
            padding: 20,
            width: "80%",
            maxWidth: 500,
            height: 300,
            overflow: "auto",
            marginInline: "auto",
            background: "#fff0f6",
          }}
        >
          {message.split("\n").map((line, i) => (
            <p key={i}>{line}</p>
          ))}
        </div>
      )}
    </div>
  );
}
